var translations = {
    "en": { //英语
        "top1": "HOME",
        "top2": "NEWS",
        "top3": "RECHARGE",
        "top4": "SIGN IN",
        "top5": "[log out]",
        "loginbox1": "USERNAME",
        "loginbox2": "PASSWORD",
        "loginbox3": "Auto Login",
        "loginbox4": "FORGOT PASSWORD?",
        "loginbox5": "CREATE ACCOUNT",
        "loginbox6": "Account:",
        "menu1": "LATEST",
        "menu2": "NEWS",
        "menu3": "EVENTS",
        "menu4": "GUIDES",
        "menu5": "SUPPORT",
        "menu6": "MORE >>",
        "detail1": "You are here:",
        "detail2": "BACK >>",
        "detail3": "First",
        "detail4": "Pre",
        "detail5": "Next",
        "detail6": "Last",
        "detail7": "<< BACK",
        "GUIDES": "GUIDES",
        "EVENTS": "EVENTS",
        "NEWS": "NEWS",
        "SUPPORT": "SUPPORT",
        "LATEST": "LATEST",
    },
    "tr": { //土耳其语
        "top1": "ANA SAYFA",
        "top2": "HABERLER",
        "top3": "ÖZELLİKLER",
        "top4": "GİRİŞ YAP",
        "top5": "[ÇIKIŞ]",
        "loginbox1": "KULLANICI ADI",
        "loginbox2": "ŞİFRE",
        "loginbox3": "Otomatik Gir",
        "loginbox4": "ŞİFREMİ UNUTTUM?",
        "loginbox5": "HESAP OLUŞTUR",
        "loginbox6": "hesabınızı:",
        "menu1": "GÜNCEL",
        "menu2": "HABERLER",
        "menu3": "ETKİNLİKLER",
        "menu4": "REHBERLER",
        "menu5": "DESTEK",
        "menu6": "DAHA FAZLASI >>",
        "detail1": "Buradasınız:",
        "detail2": "GERİ >>",
        "detail3": "İlk",
        "detail4": "Önceki",
        "detail5": "Sonraki",
        "detail6": "Son",
        "detail7": "<< GERİ",
        "GUIDES": "REHBERLER",
        "EVENTS": "ETKİNLİKLER",
        "NEWS": "HABERLER",
        "SUPPORT": "DESTEK",
        "LATEST": "GÜNCEL",
    },
    "pt": { //葡萄牙语
        "top1": "PRINCIPAL",
        "top2": "NOTÍCIAS",
        "top3": "CARACTERÍSTICAS",
        "top4": "ENTRAR",
        "top5": "[SAIR]",
        "loginbox1": "USUÁRIO",
        "loginbox2": "SENHA",
        "loginbox3": "Auto Login",
        "loginbox4": "ESQUECI A SENHA?",
        "loginbox5": "CRIAR CONTA",
        "loginbox6": "conta:",
        "menu1": "NOVIDADES",
        "menu2": "NOTÍCIAS",
        "menu3": "EVENTOS",
        "menu4": "GUIAS",
        "menu5": "SUPORTE",
        "menu6": "MAIS >>",
        "detail1": "Você está aqui:",
        "detail2": "VOLTAR >>",
        "detail3": "Primeira",
        "detail4": "Anterior",
        "detail5": "Próxima",
        "detail6": "Última",
        "detail7": "<< VOLTAR",
        "GUIDES": "GUIAS",
        "EVENTS": "EVENTOS",
        "NEWS": "NOTÍCIAS",
        "SUPPORT": "SUPORTE",
        "LATEST": "NOVIDADES",
    },
    "de": { //德语
        "top1": "HOME",
        "top2": "NEWS",
        "top3": "EIGENSCHAFTEN",
        "top4": "ANMELDEN",
        "top5": "[ABMELDEN]",
        "loginbox1": "BENUTZERNAME",
        "loginbox2": "PASSWORT",
        "loginbox3": "Auto Login",
        "loginbox4": "PASSWORT VERGESSEN?",
        "loginbox5": "ACCOUNT ERSTELLEN",
        "loginbox6": "Account:",
        "menu1": "NEUESTES",
        "menu2": "NEWS",
        "menu3": "EVENTS",
        "menu4": "ANLEITUNGEN",
        "menu5": "SUPPORT",
        "menu6": "MEHR >>",
        "detail1": "Du bist hier:",
        "detail2": "ZURÜCK >>",
        "detail3": "Erste",
        "detail4": "Vorherige",
        "detail5": "Nächste",
        "detail6": "Letzte",
        "detail7": "<< ZURÜCK",
        "GUIDES": "ANLEITUNGEN",
        "EVENTS": "EVENTS",
        "NEWS": "NEWS",
        "SUPPORT": "SUPPORT",
        "LATEST": "NEUESTES",
    },
    "es": { //西班牙语
        "top1": "INICIO",
        "top2": "NOVEDADES",
        "top3": "CARACTERÍSTICAS",
        "top4": "INICIAR SESIÓN",
        "top5": "[CERRAR SESIÓN]",
        "loginbox1": "NOMBRE DE USUARIO",
        "loginbox2": "CONTRASEÑA",
        "loginbox3": "Auto Login",
        "loginbox4": "OLVIDÉ MI CONTRASEÑA?",
        "loginbox5": "CREAR CUENTA",
        "loginbox6": "cuenta:",
        "menu1": "RECIENTE",
        "menu2": "NOVEDADES",
        "menu3": "EVENTOS",
        "menu4": "GUÍAS",
        "menu5": "APOYO",
        "menu6": "MÁS >>",
        "detail1": "Estás aquí:",
        "detail2": "ATRÁS >>",
        "detail3": "Primera",
        "detail4": "Anterior",
        "detail5": "Siguiente",
        "detail6": "Última",
        "detail7": "<< ATRÁS",
        "GUIDES": "GUÍAS",
        "EVENTS": "EVENTOS",
        "NEWS": "NOVEDADES",
        "SUPPORT": "APOYO",
        "LATEST": "RECIENTE",
    },
    "fr": { //英语
        "top1": "ACCUEIL",
        "top2": "ACTUALITÉS",
        "top3": "FONCTIONNALITÉS",
        "top4": "CONNEXION",
        "top5": "[déconnexion]",
        "loginbox1": "NOM D'UTILISATEUR",
        "loginbox2": "MOT DE PASSE",
        "loginbox3": "Connexion automatique",
        "loginbox4": "MOT DE PASSE OUBLIÉ ?",
        "loginbox5": "CRÉER UN COMPTE",
        "loginbox6": "Compte :",
        "menu1": "DERNIERES NOUVELLES",
        "menu2": "ACTUALITÉS",
        "menu3": "ÉVÉNEMENTS",
        "menu4": "GUIDES",
        "menu5": "ASSISTANCE",
        "menu6": "PLUS >>",
        "detail1": "Vous êtes ici :",
        "detail2": "RETOUR >>",
        "detail3": "Premier",
        "detail4": "Précédent",
        "detail5": "Suivant",
        "detail6": "Dernier",
        "detail7": "<< RETOUR",
        "GUIDES": "GUIDES",
        "EVENTS": "ÉVÉNEMENTS",
        "NEWS": "ACTUALITÉS",
        "SUPPORT": "ASSISTANCE",
        "LATEST": "DERNIERES NOUVELLES",
    },
}
var bgInit = {
    "en": "act1",
    "tr": "act2",
    "pt": "act3",
    "de": "act4",
    "es": "act5",
    "fr": "act6"
}
var bgClassName = function (lang) {
    for (let item in bgInit) {
        if (item == lang) {
            return bgInit[item]
        }
    }
}
// function getLanguage(langGather, defaultlang) {
//     var language = window.navigator.language || window.navigator.browserLanguage;
//     var localLanguage = language.toLowerCase().substr(0, 2)

//     defaultlang = typeof defaultlang != 'undefined' ? defaultlang : 'en';
//     if (localLanguage in langGather) {
//         return localLanguage
//     } else {
//         return defaultlang
//     }
// }
var cname = 'WAN_COM_LANGUAGES'
var defaultlang = 'en'
var langConfig = {
    "en": ["en"],
    "tr": ["tr"],
    "pt": ["pt"],
    "de": ["de"],
    "es": ["es"],
    "fr": ["fr"]
}
var langStorage = {
    setStorage: function (cvalue, exdays) {
        var d = new Date();
        var ed = exdays ? exdays : 365;
        d.setTime(d.getTime() + ed * 24 * 60 * 60 * 1000);
        var expires = 'expires=' + d.toGMTString();
        document.cookie = cname + '=' + cvalue + '; ' + expires + '; domain=.wan.com; path=/';
    },
    getCookie: function () {
        var name = cname + '=';
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            if (ca[i].indexOf(name) >= 0) {
                console.log()
                return ca[i].split('=')[1];
            }
        }
        return '';
    }

}
// var currentLanguage = getLanguage(translations);
var sLang = langStorage.getCookie()
var currentLanguage = getLanguage(langConfig, defaultlang, sLang)

var langIndex = { en: 0, de: 1, es: 2, pt: 3, tr: 4, fr: 5 }
var globalUl = document.querySelector('.global')
var lis = globalUl && globalUl.getElementsByTagName('li')
if (currentLanguage != defaultlang) {
    langStorage.setStorage(currentLanguage)
}
languageInit()


globalUl ? globalUl.onclick = function (e) {
    console.log(e)
    if (e.target.nodeName.toLowerCase() == 'li') {
        currentLanguage = e.target.getAttribute('lang')
        langStorage.setStorage(currentLanguage)
        window.location.reload()
    }
} : null

// var langObj = GLanguage[currentLang]
function translate(key) {
    return translations[currentLanguage][key];
}
function languageInit() {
    document.querySelector('body').classList.add('lang_' + currentLanguage)
    lis && lis[langIndex[currentLanguage]].classList.add('act')
    $('[data-lang]').each(function (index, item) {
        var locaLang = $(this).attr('data-lang')
        var nodeName = $(this)[0].nodeName.toLowerCase()
        if (nodeName == 'li' ||
            nodeName == 'div' ||
            nodeName == 'span' ||
            nodeName == 'a' ||
            nodeName == 'b' ||
            nodeName == 'p' ||
            nodeName == 'label'
        ) {
            $(this).text(`${translate(locaLang)}`)
        } else if (nodeName == 'img') {
            $(this).attr('src', translate(locaLang))
        } else if (nodeName == 'input') {
            $(this).attr('placeholder', translate(locaLang))
        }
    })
}

function getLanguage(langConfig, defaultlang, gameLang) {
    var language = gameLang || window.navigator.language || window.navigator.browserLanguage;
    var currentLang = language ? language.toLowerCase() : '';
    if (langConfig[currentLang]) {
        document.querySelector('body').classList.add('lang_' + currentLang)
        return currentLang;
    }
    for (var lang in langConfig) {
        var langs = langConfig[lang];
        if (langs.indexOf(currentLang) > -1) {
            document.querySelector('body').classList.add('lang_' + lang)
            return lang
        } else {
            var langArr = currentLang.split('-');
            if (langArr[0] == langs[0]) {
                document.querySelector('body').classList.add('lang_' + lang)
                return lang
            }
        }
    }
    document.querySelector('body').classList.add('lang_' + defaultlang)
    return defaultlang
}